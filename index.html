<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="author" content="Harry Undersand">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harry Undersand â€” DÃ©veloppeur & Architecte IA</title>

<!-- Open Graph (WhatsApp, Facebook, Telegram, Discord) -->
<meta property="og:title" content="Harry Undersand â€” DÃ©veloppeur & Architecte IA">
<meta property="og:description" content="Chatbots IA, Streaming Premium, HÃ©bergement Cloud et solutions digitales modernes.">
<meta property="og:image" content="https://files.catbox.moe/7p2g2y.jpg">
<meta property="og:url" content="https://harry-undersand.vercel.app">
<meta property="og:type" content="website">

<!-- Twitter / X -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Harry Undersand â€” DÃ©veloppeur & Architecte IA">
<meta name="twitter:description" content="Chatbots IA, Streaming Premium, HÃ©bergement Cloud et automatisation digitale.">
<meta name="twitter:image" content="https://files.catbox.moe/7p2g2y.jpg">

<link rel="icon" type="image/svg+xml"
href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>â›©ï¸</text></svg>">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0b141a;
--card:#111b21;
--border:rgba(139,92,246,.35);
--violet:#8b5cf6;
--violet-dark:#7c3aed;
--text:#e9edef;
--muted:#8696a0;
}
body{
font-family:Inter,Arial,sans-serif;
background:var(--bg);
color:var(--text);
}
header{
position:fixed;
top:0;width:100%;
z-index:1000;
background:rgba(11,20,26,.9);
backdrop-filter:blur(16px);
border-bottom:1px solid var(--border);
}
.navbar{
max-width:1200px;
margin:auto;
padding:16px 24px;
display:flex;
justify-content:space-between;
align-items:center;
}
.logo{color:var(--violet);font-weight:800;text-decoration:none}
.nav-links{display:flex;gap:18px}
.nav-links a{color:var(--muted);text-decoration:none}
.nav-links a:hover{color:var(--violet)}
.burger{display:none;font-size:22px;cursor:pointer}

.container{max-width:1200px;margin:auto;padding:20px}
.hero{padding-top:160px;text-align:center}
.hero h1{font-size:3rem}
.hero span{color:var(--violet)}
.hero p{margin:20px auto;max-width:780px;color:var(--muted)}
.btn{padding:12px 22px;border-radius:30px;border:none;cursor:pointer;font-weight:600}
.btn-primary{background:linear-gradient(135deg,var(--violet),var(--violet-dark));color:#fff}
.btn-outline{background:none;border:1px solid var(--border);color:#fff}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:28px;margin-top:40px}
.card{
background:var(--card);
border:1px solid var(--border);
border-radius:20px;
padding:26px;
transition:.3s;
}
.card:hover{transform:translateY(-6px);box-shadow:0 0 30px rgba(139,92,246,.35)}

.auth-actions{display:flex;gap:10px;align-items:center}
.auth-actions img{width:32px;height:32px;border-radius:50%}

.modal-bg{
position:fixed;inset:0;
background:rgba(0,0,0,.65);
display:none;
align-items:center;
justify-content:center;
z-index:2000
}
.modal{
background:var(--card);
border:1px solid var(--border);
padding:30px;
border-radius:20px;
max-width:420px;width:100%
}
.auth-btn{
width:100%;
padding:14px;
margin-top:12px;
border-radius:12px;
border:none;
cursor:pointer;
font-weight:600;
display:flex;
align-items:center;
justify-content:center;
gap:10px
}
.auth-btn.google{background:#fff;color:#000}
.auth-btn.facebook{background:#1877f2;color:#fff}
.auth-btn.github{background:#0f172a;color:#fff}
.close-btn{margin-top:16px;background:none;border:none;color:#94a3b8;cursor:pointer}

.stars-display{
  margin:6px 0 10px;
  color:#facc15;
}

/* =========================
   â­ AVIS & COMMENTAIRES
========================= */

#comments{
max-width:900px;
margin:80px auto;
padding:40px;
background:linear-gradient(180deg,#0f172a,#020617);
border:1px solid var(--border);
border-radius:26px;
box-shadow:0 0 60px rgba(139,92,246,.25);
}

#comments h2{
text-align:center;
font-size:2.2rem;
margin-bottom:25px;
background:linear-gradient(135deg,var(--violet),#a78bfa);
-webkit-background-clip:text;
color:transparent;
}

/* FORM */
#comment-form{
display:flex;
flex-direction:column;
gap:16px;
background:rgba(255,255,255,.02);
padding:30px;
border-radius:20px;
border:1px solid rgba(255,255,255,.06);
}

#comment-form input,
#comment-form textarea{
background:#020617;
border:1px solid rgba(255,255,255,.08);
border-radius:14px;
padding:14px 16px;
color:#fff;
font-size:15px;
outline:none;
}

#comment-form textarea{
min-height:120px;
resize:none;
}

#comment-form input:focus,
#comment-form textarea:focus{
border-color:var(--violet);
box-shadow:0 0 0 2px rgba(139,92,246,.35);
}

/* â­ Ã‰TOILES */
.stars{
display:flex;
justify-content:center;
gap:10px;
font-size:32px;
cursor:pointer;
}

.stars span{
filter:grayscale(1);
opacity:.4;
transition:.25s ease;
}

.stars span:hover,
.stars span.active{
filter:none;
opacity:1;
transform:scale(1.25);
text-shadow:0 0 14px rgba(250,204,21,.7);
}

/* BOUTON */
#comment-form button{
margin-top:10px;
align-self:center;
padding:14px 34px;
border-radius:40px;
border:none;
font-weight:700;
font-size:15px;
cursor:pointer;
color:white;
background:linear-gradient(135deg,var(--violet),var(--violet-dark));
box-shadow:0 0 30px rgba(139,92,246,.45);
transition:.3s;
}

#comment-form button:hover{
transform:translateY(-2px);
box-shadow:0 0 50px rgba(139,92,246,.65);
}

/* ğŸ“Š STATS */
#comments > p{
text-align:center;
margin:25px 0 35px;
font-size:1.1rem;
color:#c4b5fd;
}

/* LISTE COMMENTAIRES */
#comments-list{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:22px;
}

/* CARTE COMMENTAIRE */
.comment-card{
background:rgba(255,255,255,.03);
border:1px solid rgba(255,255,255,.08);
border-radius:20px;
padding:22px;
transition:.3s;
position:relative;
overflow:hidden;
}

.comment-card::before{
content:"";
position:absolute;
inset:0;
background:linear-gradient(120deg,transparent,rgba(139,92,246,.18),transparent);
opacity:0;
transition:.4s;
}

.comment-card:hover::before{
opacity:1;
}

.comment-card:hover{
transform:translateY(-6px);
box-shadow:0 0 40px rgba(139,92,246,.35);
}

.comment-card h4{
margin-bottom:6px;
color:#a78bfa;
}

.comment-card p{
color:#e5e7eb;
font-size:14px;
line-height:1.6;
}

.comment-card .stars-display{
margin:6px 0 10px;
color:#facc15;
}

.comment-date{
display:block;
margin-top:10px;
font-size:12px;
color:#9ca3af;
text-align:right;
}

.delete-comment{
margin-top:10px;
padding:6px 14px;
border:none;
border-radius:10px;
font-size:12px;
cursor:pointer;
background:#dc2626;
color:white;
}
.delete-comment:hover{
background:#b91c1c;
}

@media (max-width: 600px) {

  .hero h1 {
    font-size: 2rem;
  }

  .hero p {
    font-size: 1rem;
    padding: 0 10px;
  }

  .navbar {
    padding: 14px;
  }

  .auth-actions {
    flex-direction: column;
    gap: 6px;
  }

  #comments {
    margin: 40px 12px;
    padding: 24px 16px;
  }

  #comment-form {
    padding: 20px;
  }

  .stars {
    font-size: 26px;
  }

  .comment-card {
    padding: 18px;
  }

  .modal {
    margin: 0 12px;
  }
}

/* =========================
   ğŸ§  SECTION DESCRIPTION
========================= */
.about{
  max-width:1200px;
  margin:100px auto;
  padding:40px 20px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:50px;
  align-items:center;
}

.about h2{
  font-size:2.4rem;
  margin-bottom:20px;
  background:linear-gradient(135deg,var(--violet),#a78bfa);
  -webkit-background-clip:text;
  color:transparent;
}

.about p{
  color:var(--muted);
  font-size:1.05rem;
  line-height:1.8;
  margin-bottom:16px;
}

.about ul{
  margin-top:20px;
  padding-left:20px;
}

.about li{
  margin-bottom:10px;
  color:#e5e7eb;
}

.about img{
  width:100%;
  border-radius:22px;
  border:1px solid var(--border);
  box-shadow:0 0 60px rgba(139,92,246,.35);
}

@media(max-width:900px){
  .about{
    grid-template-columns:1fr;
    text-align:center;
  }
}

/* =========================
   ğŸ§© CARTES SERVICES
========================= */
.services{
  max-width:1200px;
  margin:80px auto;
  padding:0 20px;
}

.services h2{
  text-align:center;
  font-size:2.4rem;
  margin-bottom:50px;
  background:linear-gradient(135deg,var(--violet),#a78bfa);
  -webkit-background-clip:text;
  color:transparent;
}

.services-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:28px;
}

.service-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:30px;
  transition:.35s ease;
  opacity:0;
  transform:translateY(30px);
}

.service-card i{
  font-size:36px;
  color:var(--violet);
  margin-bottom:18px;
}

.service-card h3{
  margin-bottom:12px;
}

.service-card p{
  color:var(--muted);
  line-height:1.6;
}

.service-card.show{
  opacity:1;
  transform:translateY(0);
}

.service-card:hover{
  transform:translateY(-6px);
  box-shadow:0 0 40px rgba(139,92,246,.35);
}

.menu-btn{
  font-size:24px;
  cursor:pointer;
  color:var(--text);
  z-index:3001;
}

.drawer-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(10px);
  opacity:0;
  pointer-events:none;
  transition:.35s ease;
  z-index:1999;
}

.drawer-overlay.show{
  opacity:1;
  pointer-events:auto;
}

.drawer{
  position:fixed;
  top:0;
  right:-0;
  transform:translateX(100%);
  opacity:0;
  width:340px;
  max-width:90%;
  height:100%;
  min-height:100dvh;
  background:var(--card);
  border-left:1px solid var(--border);
  padding:28px;
  transition:
    transform .45s cubic-bezier(.4,0,.2,1),
    opacity .3s ease;
  z-index:2000;
  display:flex;
  flex-direction:column;
  }

.drawer.open{
  transform:translateX(0);
  opacity:1;
}

.drawer-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:700;
  margin-bottom:30px;
}

.drawer-header button{
  background:none;
  border:none;
  color:var(--muted);
  font-size:20px;
  cursor:pointer;
}

.drawer-links a{
  display:block;
  padding:14px 12px;
  margin-bottom:6px;
  border-radius:14px;
  color:var(--muted);
  text-decoration:none;
  font-weight:500;
  opacity:0;
  transform:translateX(20px);
  animation:linkFade .4s forwards;
  touch-action:manipulation;
}

.drawer.open .drawer-links a{
  animation-delay:calc(var(--i) * 80ms);
}

.drawer-links a:hover{
  background:rgba(139,92,246,.15);
  color:var(--violet);
  position:relative;
}

.drawer-links{
  flex:1;
  overflow-y:auto;
  padding-right:6px;
  -webkit-overflow-scrolling: touch;
}

.drawer-links::after{
  content:"";
  position:sticky;
  bottom:0;
  left:0;
  width:100%;
  height:24px;
  pointer-events:none;
  background:linear-gradient(
    to bottom,
    rgba(15,15,25,0),
    rgba(15,15,25,.85)
  );
  opacity:0;
  transition:.3s;
}

.drawer-links.can-scroll::after{
  opacity:1;
}

.drawer-links::-webkit-scrollbar{
  width:6px;
}
.drawer-links::-webkit-scrollbar-thumb{
  background:rgba(139,92,246,.4);
  border-radius:10px;
}
.drawer-links::-webkit-scrollbar-track{
  background:transparent;
}

.drawer-cta{
  background:linear-gradient(135deg,var(--violet),var(--violet-dark));
  color:#fff !important;
  text-align:center;
  font-weight:700;
}

.drawer-search{
  margin-bottom:16px;
}

.drawer-search input{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  background:var(--bg);
  border:1px solid var(--border);
  color:var(--text);
  outline:none;
}

.drawer-search input::placeholder{
  color:var(--muted);
}

@keyframes linkFade{
  to{
    opacity:1;
    transform:translateX(0);
  }
}

.drawer-links mark{
  background:rgba(139,92,246,.3);
  color:inherit;
  padding:2px 4px;
  border-radius:4px;
}

/* ================= DASHBOARD ================= */

.dashboard{
  margin:100px auto;
}

.dashboard-title{
  text-align:center;
  font-size:2.4rem;
  margin-bottom:50px;
  background:linear-gradient(135deg,var(--violet),#a78bfa);
  -webkit-background-clip:text;
  color:transparent;
}

/* KPI */
.kpi-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:28px;
  margin-bottom:50px;
}

.kpi-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:30px;
  text-align:center;
  transition:.35s;
}

.kpi-card h4{
  color:var(--muted);
  margin-bottom:15px;
}

.kpi-card p{
  font-size:2rem;
  font-weight:800;
  color:var(--violet);
}

.kpi-card:hover{
  transform:translateY(-6px);
  box-shadow:0 0 40px rgba(139,92,246,.4);
}

/* TABLE */
.stats-table-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:30px;
  margin-bottom:60px;
  overflow:auto;
}

.stats-table{
  width:100%;
  border-collapse:collapse;
}

.stats-table th,
.stats-table td{
  padding:16px;
  text-align:left;
}

.stats-table th{
  color:var(--muted);
  border-bottom:1px solid rgba(255,255,255,.1);
}

.stats-table tr:hover{
  background:rgba(139,92,246,.05);
}

/* CHARTS */
.charts-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:40px;
}

canvas{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:20px;
}

@media(max-width:900px){
  .charts-grid{
    grid-template-columns:1fr;
  }
}

/* ================= HEATMAP ================= */

.heatmap-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:30px;
  margin-top:60px;
}

.heatmap-card h3{
  margin-bottom:25px;
}

.heatmap-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(22px,1fr));
  gap:6px;
}

.heatmap-day{
  width:22px;
  height:22px;
  border-radius:6px;
  background:#1f2937;
  transition:.3s;
}

.heatmap-day:hover{
  transform:scale(1.2);
}

.kpi-card{
  position:relative;
}

.badge-float{
  position:absolute;
  top:15px;
  right:15px;
  padding:6px 12px;
  border-radius:30px;
  font-size:12px;
  font-weight:700;
  display:flex;
  align-items:center;
  gap:6px;
  transition:.3s;
}

.badge-float svg{
  width:14px;
  height:14px;
}

.badge-float.up{
  background:#dcfce7;
  color:#16a34a;
}

.badge-float.down{
  background:#fee2e2;
  color:#dc2626;
}

.badge-float.neutral{
  background:#e5e7eb;
  color:#6b7280;
}

/* =========================
   ğŸŸ¢ BADGE VISITEURS EN LIGNE
========================= */

.online-badge{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#16a34a;
  color:white;
  padding:10px 18px;
  border-radius:30px;
  font-weight:600;
  font-size:14px;
  display:flex;
  align-items:center;
  gap:8px;
  box-shadow:0 0 25px rgba(22,163,74,.6);
  z-index:3000;
  animation:fadeIn .6s ease;
  cursor:grab;

}

.online-badge .dot{
  width:10px;
  height:10px;
  background:#bbf7d0;
  border-radius:50%;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%{transform:scale(1);opacity:1}
  50%{transform:scale(1.6);opacity:.6}
  100%{transform:scale(1);opacity:1}
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* =========================
   â³ COMPTE Ã€ REBOURS 24H
========================= */

.day-countdown{
  position:relative;
  margin:120px auto 5px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:12px;
  width:max-content;

  background:rgba(10,15,25,.85);
  backdrop-filter:blur(15px);
  padding:16px 28px;
  border-radius:20px;
  border:1px solid rgba(139,92,246,.4);
  box-shadow:0 0 40px rgba(139,92,246,.6);
}

.countdown-box{
  text-align:center;
  min-width:70px;
}

.countdown-box span{
  font-size:2rem;
  font-weight:900;
  background:linear-gradient(135deg,#ff00cc,#8b5cf6,#22d3ee);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 0 25px rgba(139,92,246,.9);
}

.countdown-box small{
  font-size:.7rem;
  color:#a78bfa;
  letter-spacing:1px;
}

.countdown-separator{
  font-size:1.8rem;
  font-weight:800;
  color:#22d3ee;
  animation:blink 1s infinite;
}

@keyframes blink{
  50%{opacity:.3}
}

/* =========================
   ğŸŒŒ FOND ESPACE ANIMÃ‰
========================= */

body {
  background: radial-gradient(ellipse at bottom, #090a1a 0%, #000000 100%);
  overflow-x: hidden;
}

/* Canvas Ã©toiles */
#space-bg {
  position: fixed;
  top: 0;
  left: 0;;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
}

.hero-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 50px;
  flex-wrap: wrap;
}

.hero-image img {
  width: 420px;
  border-radius: 20px;
  box-shadow: 0 0 80px rgba(139,92,246,.6);
  animation: floatHero 6s ease-in-out infinite;
}

@keyframes floatHero {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-18px); }
  100% { transform: translateY(0px); }
}

@media(max-width:900px){
  .hero-content{
    flex-direction:column;
    text-align:center;
  }
}

html, body {
  margin: 0;
  padding: 0;
}

body {
  min-height: 100vh;
}

/* Supprime marge en bas de la derniÃ¨re section */
section:last-of-type,
div:last-of-type {
  margin-bottom: 0 !important;
}
</style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4304218039779695"
crossorigin="anonymous"></script>
</head>

<body>

<canvas id="space-bg"></canvas>
  
<header>
<section class="container" id="adminPanel" style="display:none">
  <div class="card">
    <h2>ğŸ‘‘ Administration</h2>

    <p>ğŸ“Š Visites : <b><span id="adminVisits">0</span></b></p>

    <h3>ğŸ‘¥ Utilisateurs</h3>
    <table class="users-table">
      <thead>
        <tr>
          <th>Email</th>
          <th>RÃ´le</th>
          <th>Statut</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="usersTable"></tbody>
    </table>
  </div>
</section>

<div class="navbar">
<a class="logo" href="/">å½¡ã€ğ€ğ¦ğšğ­ğğ®ğ« ğƒğ ğ…ğšğ§ğ­ğšğ¢ğ¬ğ¢ğ ã€å½¡</a>
<div class="menu-btn" onclick="openDrawer()">
  <i class="fas fa-bars"></i>
</div>

<div class="auth-actions" id="authGuest">
<button class="btn btn-outline" id="loginBtn">Connexion</button>
<button class="btn btn-primary" id="registerBtn">Inscription</button>
</div>
<div class="auth-actions" id="authUser" style="display:none">
<span id="welcomeText"></span>
<img id="userPhoto">
<button class="btn btn-outline" id="logoutBtn">DÃ©connexion</button>
</div>
</div>
</header>

<!-- â³ Compte Ã  rebours journÃ©e -->
<div class="day-countdown">
  <div class="countdown-box">
    <span id="countHours">00</span>
    <small>Heures</small>
  </div>
  <div class="countdown-separator">:</div>
  <div class="countdown-box">
    <span id="countMinutes">00</span>
    <small>Minutes</small>
  </div>
  <div class="countdown-separator">:</div>
  <div class="countdown-box">
    <span id="countSeconds">00</span>
    <small>Secondes</small>
  </div>
</div>

<div class="drawer-overlay" onclick="closeDrawer()"></div>

<aside class="drawer" id="drawerMenu">
  <div class="drawer-header">
    <span>Navigation</span>
    <button onclick="closeDrawer()">âœ•</button>
  </div>
  
<div class="drawer-search">
  <input type="text" id="drawerSearch" placeholder="Rechercher...">
</div>

<nav class="drawer-links">
  <a href="harry-undersand.html" class="drawer-cta" style="--i:1">ğŸ‘¤ Harry Undersand</a>
  <a href="chatbot.html" style="--i:1">ğŸ¤– Chatbots IA</a>
  <a href="streaming.html" class="drawer-cta" style="--i:2">ğŸ¬ Streaming</a>
  <a href="hosting.html" style="--i:3">â˜ï¸ HÃ©bergement</a>
  <a href="premium.html" class="drawer-cta" style="--i:4">ğŸ’ Premium</a>
  <a href="services.html" style="--i:5">ğŸ§© Services</a>
  <a href="pack-streaming.html" class="drawer-cta" style="--i:6">ğŸ Pack Streaming</a>
  <a href="about.html" style="--i:7">ğŸ’¡ A Propos</a>
  <a href="alice.html" class="drawer-cta" style="--i:6">ğŸ—£ï¸ Alice</a>
  <a href="chat.html" style="--i:7">ğŸš€ MÃ©ssagerie</a>
  <a href="commande.html" class="drawer-cta" style="--i:8">ğŸ›’ Commander ğŸ›ï¸</a>
  <a href="contact.html" style="--i:9">ğŸ“ Contact â˜ï¸</a>
  <a href="amateurbox.html" class="drawer-cta" style="--i:10">ğŸ’° Amateur Box ğŸ’³</a>
  <a href="jeunetransitaire.html" style="--i:11">ğŸ“¢ PublicitÃ©s ğŸ“Š</a>
  <a href="netflix.html" class="drawer-cta" style="--i:12">ğŸ­ Netflix ğŸ­</a>
  <a href="iptv.html" style="--i:14">ğŸ–¥ï¸ IPTV ğŸ–¥ï¸</a>
  <a href="mycanal.html" class="drawer-cta" style="--i:13">ğŸ“¡ MyCanal ğŸ“¡</a>
  
<a href="https://jeunetransitaire.vercel.app" target="_blank">
  âš–ï¸ Jeune Transitaire Officiel âš“
</a>

</nav>
</aside>

<div class="online-badge" id="draggableBadge">
  <div class="dot"></div>
  <span id="onlineCount">0</span> en ligne
</div>

<section class="hero">
  <div class="hero-content">
    <div class="hero-text">
      <h1>
        Harry Undersand<br>
        <span>Architecte IA & Univers Digital</span>
      </h1>
      <p>
        CrÃ©ation de solutions intelligentes, plateformes premium,
        automatisation avancÃ©e et expÃ©riences digitales futuristes.
      </p>
      <div style="margin-top:25px">
        <button class="btn btn-primary">Explorer</button>
        <button class="btn btn-outline">DÃ©couvrir</button>
      </div>
    </div>

    <div class="hero-image">
      <img src="https://images.unsplash.com/photo-1462331940025-496dfbfc7564"
           alt="Univers digital">
    </div>
  </div>
</section>

<!-- ğŸ§© SERVICES -->
<section class="services">
  <h2>Mes services</h2>

  <div class="services-grid">

    <div class="service-card">
      <i class="fas fa-robot"></i>
      <h3>Chatbots IA</h3>
      <p>
        Conception de chatbots intelligents capables de dialoguer,
        automatiser le support client et amÃ©liorer lâ€™expÃ©rience utilisateur.
      </p>
    </div>

    <div class="service-card">
      <i class="fas fa-cloud"></i>
      <h3>HÃ©bergement Cloud</h3>
      <p>
        Infrastructure sÃ©curisÃ©e, rapide et scalable pour vos
        applications web et plateformes professionnelles.
      </p>
    </div>

    <div class="service-card">
      <i class="fas fa-video"></i>
      <h3>Streaming Premium</h3>
      <p>
        DÃ©veloppement de plateformes de streaming modernes,
        optimisÃ©es pour la performance et la confidentialitÃ©.
      </p>
    </div>

    <div class="service-card">
      <i class="fas fa-gears"></i>
      <h3>Automatisation</h3>
      <p>
        Automatisation de processus mÃ©tier pour gagner du temps,
        rÃ©duire les erreurs et amÃ©liorer la productivitÃ©.
      </p>
    </div>

  </div>
</section>

<section class="container" style="text-align:center;margin-top:40px">
  <p style="color:#c4b5fd;font-size:1.1rem">
    ğŸ“… Aujourdâ€™hui : <b><span id="todayVisits">0</span></b>
  </p>
</section>

<div class="kpi-card">
  <h4>En ligne</h4>
  <p id="onlineUsers">0</p>
</div>

<section class="dashboard container">

  <h2 class="dashboard-title">ğŸš€ â†“ Analyses Utilisateurs â†‘ ğŸš€</h2>

  <!-- KPI CARDS -->
  <div class="kpi-grid">

<div class="kpi-card">
  <div class="badge-float neutral" id="todayBadge"></div>
  <h4>Aujourdâ€™hui</h4>
  <p id="todayVisitsCard" class="counter">0</p>
</div>

<div class="kpi-card">
  <div class="badge-float neutral" id="monthBadge"></div>
  <h4>Ce mois</h4>
  <p id="monthVisits" class="counter">0</p>
</div>

<div class="kpi-card">
  <div class="badge-float neutral" id="yearBadge"></div>
  <h4>Cette annÃ©e</h4>
  <p id="yearVisits" class="counter">0</p>
</div>

    <div class="kpi-card">
      <h4>Ã‰volution</h4>
      <p id="todayPercent">0%</p>
    </div>

  </div>

  <!-- TABLEAU DETAILLE -->
  <div class="stats-table-card">
    <table class="stats-table">
      <thead>
        <tr>
          <th>PÃ©riode</th>
          <th>Visites</th>
          <th>Moyenne</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Aujourdâ€™hui</td>
          <td id="todayTable">0</td>
          <td>-</td>
        </tr>
        <tr>
          <td>Mois en cours</td>
          <td id="monthTable">0</td>
          <td id="avgDay">0</td>
        </tr>
        <tr>
          <td>AnnÃ©e en cours</td>
          <td id="yearTable">0</td>
          <td id="avgMonth">0</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- GRAPHIQUES -->
  <div class="charts-grid">
    <canvas id="monthlyChart"></canvas>
    <canvas id="realtimeChart"></canvas>
  </div>

</section>

<!-- HEATMAP -->
<div class="heatmap-card">
  <h3>ğŸ”¥ ActivitÃ© journaliÃ¨re</h3>
  <div id="heatmap" class="heatmap-grid"></div>
</div>

<!-- MODALE AUTH -->
<div class="modal-bg" id="authModal">
<div class="modal">
<h2>Connexion</h2>
<p>Choisis un moyen pour continuer</p>
<button class="auth-btn google" id="googleLogin"><i class="fab fa-google"></i> Google</button>
<button class="auth-btn facebook" id="facebookLogin"><i class="fab fa-facebook"></i> Facebook</button>
<button class="auth-btn github" id="githubLogin"><i class="fab fa-github"></i> GitHub</button>
<button class="close-btn" id="closeModal">Fermer</button>
</div>
</div>

<section id="comments">

  <h2>Avis clients</h2>

  <form id="comment-form">
    <input type="text" id="username" placeholder="Votre nom" required>

    <div class="stars">
      <span data-value="1">â­</span>
      <span data-value="2">â­</span>
      <span data-value="3">â­</span>
      <span data-value="4">â­</span>
      <span data-value="5">â­</span>
    </div>

    <input type="hidden" id="rating">

    <textarea id="comment" placeholder="Votre commentaire" required></textarea>

    <button type="submit">Envoyer</button>
  </form>

  <p>Moyenne : <span id="avg-rating">0</span> â­  
     (<span id="rating-count">0</span> avis)</p>

  <div id="comments-list"></div>

  <div style="text-align:center;margin-top:30px">
  <button id="loadMoreComments" class="btn btn-outline">
    Voir plus
  </button>
</div>
</section>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  FacebookAuthProvider,
  GithubAuthProvider,
  signInWithPopup,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

import {
  getFirestore,
  doc,
  setDoc,
  getDoc,
  getDocs,
  collection,
  addDoc,
  deleteDoc,
  query,
  orderBy,
  onSnapshot,
  limit,
  startAfter,
  serverTimestamp,
  increment
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

let isAdmin = false;

/* ğŸ”‘ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyBdo7NO1PnAa90PhEhuzpllkB1ESGZu3J8",
  authDomain: "harry-undersand.firebaseapp.com",
  projectId: "harry-undersand"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* PROVIDERS */
const googleProvider = new GoogleAuthProvider();
const facebookProvider = new FacebookAuthProvider();
const githubProvider = new GithubAuthProvider();

/* ELEMENTS */
const authGuest = document.getElementById("authGuest");
const authUser = document.getElementById("authUser");
const adminPanel = document.getElementById("adminPanel");
const usersTable = document.getElementById("usersTable");
const adminVisits = document.getElementById("adminVisits");

const authModal = document.getElementById("authModal");

const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
const closeModal = document.getElementById("closeModal");
const googleLogin = document.getElementById("googleLogin");
const facebookLogin = document.getElementById("facebookLogin");
const githubLogin = document.getElementById("githubLogin");
const logoutBtn = document.getElementById("logoutBtn");
const welcomeText = document.getElementById("welcomeText");
const userPhoto = document.getElementById("userPhoto");

/* BOUTONS */
loginBtn.onclick = () => authModal.style.display = "flex";
registerBtn.onclick = () => authModal.style.display = "flex";
closeModal.onclick = () => authModal.style.display = "none";

googleLogin.onclick = () => signInWithPopup(auth, googleProvider);
facebookLogin.onclick = () => signInWithPopup(auth, facebookProvider);
githubLogin.onclick = () => signInWithPopup(auth, githubProvider);
logoutBtn.onclick = () => signOut(auth);

async function loadTodayClicks() {
  const ref = doc(db, "link_clicks_daily", todayKey());
  const snap = await getDoc(ref);

  const value = snap.exists() ? snap.data().count || 0 : 0;

  console.log("Clics aujourd'hui :", value);
}

function monthKey() {
  const d = new Date();
  return d.toISOString().slice(0, 7); // 2026-02
}

function yearKey() {
  return new Date().getFullYear().toString(); // 2026
}

/* =========================
   ğŸ“Š COMPTEUR VISITES STABLE
========================= */

function todayKey() {
  const d = new Date();
  return d.toISOString().slice(0, 10);
}

const globalRef = doc(db, "stats", "global");

// ğŸ”´ 1ï¸âƒ£ IncrÃ©mentation simple
async function incrementVisit() {

  const today = todayKey();
  const month = monthKey();
  const year = yearKey();

  const batch = [
    setDoc(doc(db, "stats_daily", today), { count: increment(1) }, { merge: true }),
    setDoc(doc(db, "stats_monthly", month), { count: increment(1) }, { merge: true }),
    setDoc(doc(db, "stats_yearly", year), { count: increment(1) }, { merge: true }),
    setDoc(doc(db, "stats", "global"), { visits: increment(1) }, { merge: true })
  ];

  await Promise.all(batch);
}

// ğŸŸ¢ 2ï¸âƒ£ Listener temps rÃ©el (plus fiable)
function listenTodayVisits() {

  const dailyRef = doc(db, "stats_daily", todayKey());

  onSnapshot(dailyRef, snap => {
    const value = snap.exists() ? snap.data().count || 0 : 0;
    document.getElementById("todayVisits").textContent = value;
  });

}

function animateCounter(id, endValue) {
  const el = document.getElementById(id);
  const duration = 1000;
  const start = 0;
  const startTime = performance.now();

  function update(currentTime) {
    const progress = Math.min((currentTime - startTime) / duration, 1);
    const value = Math.floor(progress * endValue);
    el.textContent = value;

    if (progress < 1) {
      requestAnimationFrame(update);
    }
  }

  requestAnimationFrame(update);
}

function updateBadge(current, previous, elementId) {

  const badge = document.getElementById(elementId);
  if (!badge) return;

  if (previous === 0) {
    badge.innerHTML = "Nouveau";
    badge.className = "badge-float neutral";
    return;
  }

  const diff = ((current - previous) / previous) * 100;
  const percent = diff.toFixed(1);

  const arrowUp = `
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 4l6 6h-4v8h-4v-8H6z"/>
    </svg>
  `;

  const arrowDown = `
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 20l-6-6h4V6h4v8h4z"/>
    </svg>
  `;

  if (diff > 0) {
    badge.innerHTML = arrowUp + " +" + percent + "%";
    badge.className = "badge-float up";
  } else if (diff < 0) {
    badge.innerHTML = arrowDown + " " + percent + "%";
    badge.className = "badge-float down";
  } else {
    badge.innerHTML = "0%";
    badge.className = "badge-float neutral";
  }
}

async function loadAdvancedStats() {

  const today = todayKey();

  const yesterdayDate = new Date();
  yesterdayDate.setDate(yesterdayDate.getDate() - 1);
  const yesterdayKey = yesterdayDate.toISOString().slice(0,10);

  const prevMonthDate = new Date();
  prevMonthDate.setMonth(prevMonthDate.getMonth() - 1);
  const prevMonthKey = prevMonthDate.toISOString().slice(0,7);

  const prevYear = (new Date().getFullYear() - 1).toString();

  const todaySnap = await getDoc(doc(db,"stats_daily",today));
  const yesterdaySnap = await getDoc(doc(db,"stats_daily",yesterdayKey));
  const monthSnap = await getDoc(doc(db,"stats_monthly",monthKey()));
  const prevMonthSnap = await getDoc(doc(db,"stats_monthly",prevMonthKey));
  const yearSnap = await getDoc(doc(db,"stats_yearly",yearKey()));
  const prevYearSnap = await getDoc(doc(db,"stats_yearly",prevYear));

  const todayVal = todaySnap.data()?.count || 0;
  const yesterdayVal = yesterdaySnap.data()?.count || 0;
  const monthVal = monthSnap.data()?.count || 0;
  const prevMonthVal = prevMonthSnap.data()?.count || 0;
  const yearVal = yearSnap.data()?.count || 0;
  const prevYearVal = prevYearSnap.data()?.count || 0;

  animateCounter("todayVisitsCard", todayVal);
  animateCounter("monthVisits", monthVal);
  animateCounter("yearVisits", yearVal);

  document.getElementById("todayTable").textContent = todayVal;
  document.getElementById("monthTable").textContent = monthVal;
  document.getElementById("yearTable").textContent = yearVal;

  updateBadge(todayVal, yesterdayVal, "todayBadge");
  updateBadge(monthVal, prevMonthVal, "monthBadge");
  updateBadge(yearVal, prevYearVal, "yearBadge");
}

// ğŸš€ 3ï¸âƒ£ Lancement automatique
window.addEventListener("DOMContentLoaded", async () => {
  await incrementVisit();
  listenTodayVisits();
  await loadAdvancedStats();
  await loadHeatmap();
  await loadMonthlyComparison();
  await setUserOnline();
});

/* =========================
   ğŸ”¥ HEATMAP JOURNALIÃˆRE
========================= */

async function loadHeatmap() {

  const heatmap = document.getElementById("heatmap");
  heatmap.innerHTML = "";

  const now = new Date();
  const year = now.getFullYear();
  const month = now.getMonth();

  const daysInMonth = new Date(year, month + 1, 0).getDate();

  for(let day = 1; day <= daysInMonth; day++){

    const date = new Date(year, month, day);
    const key = date.toISOString().slice(0,10);

    const snap = await getDoc(doc(db, "stats_daily", key));
    const count = snap.data()?.count || 0;

    const div = document.createElement("div");
    div.classList.add("heatmap-day");

    // ğŸ¨ Couleur selon intensitÃ©
    let intensity = Math.min(count / 20, 1); 
    div.style.background = `rgba(139,92,246,${intensity})`;

    div.title = `${key} : ${count} visites`;

    heatmap.appendChild(div);
  }
}

/* =========================
   ğŸ“Š GRAPHIQUES
========================= */

const monthlyCtx = document.getElementById("monthlyChart");
const realtimeCtx = document.getElementById("realtimeChart");

const monthlyChart = new Chart(monthlyCtx, {
  type: "bar",
  data: {
    labels: [],
    datasets: []
  },
  options: {
    responsive:true,
    animation:{ duration:1500 }
  }
});

const realtimeChart = new Chart(realtimeCtx, {
  type: "line",
  data: {
    labels: [],
    datasets: [{
      label: "Temps rÃ©el",
      data: [],
      borderColor: "#8b5cf6",
      tension: .4
    }]
  },
  options:{
    responsive:true,
    animation:false
  }
});

async function loadMonthlyComparison() {

  const now = new Date();
  const currentMonthKey = monthKey();

  const prevDate = new Date(now.getFullYear(), now.getMonth() - 1, 1);
  const prevMonthKey = prevDate.toISOString().slice(0,7);

  const currentSnap = await getDoc(doc(db,"stats_monthly",currentMonthKey));
  const prevSnap = await getDoc(doc(db,"stats_monthly",prevMonthKey));

  const current = currentSnap.data()?.count || 0;
  const previous = prevSnap.data()?.count || 0;

  const percent = previous ? ((current - previous)/previous)*100 : 0;
console.log("Ã‰volution mensuelle :", percent.toFixed(1)+"%");

  monthlyChart.data.labels = ["Mois prÃ©cÃ©dent","Mois actuel"];
  monthlyChart.data.datasets = [{
      label: "Comparatif visites",
      data: [previous, current],
      backgroundColor:[
        "rgba(100,116,139,.6)",
        "rgba(139,92,246,.8)"
      ],
      borderRadius:12
  }];

  monthlyChart.update();
}

/* =========================
   ğŸŸ¢ VISITEURS EN LIGNE ULTRA STABLE
========================= */

const onlineCollection = collection(db, "online_users");
const sessionId = crypto.randomUUID();
const sessionRef = doc(onlineCollection, sessionId);

// 1ï¸âƒ£ Marquer actif
async function setUserOnline() {
  await setDoc(sessionRef, {
    lastActive: serverTimestamp()
  });
}

// 2ï¸âƒ£ Ping toutes les 15 sec
setInterval(() => {
  setDoc(sessionRef, {
    lastActive: serverTimestamp()
  }, { merge: true });
}, 15000);

// 3ï¸âƒ£ Nettoyage automatique intelligent
async function cleanInactiveUsers() {
  const snapshot = await getDocs(onlineCollection);
  const now = Date.now();

  snapshot.forEach(async (docSnap) => {
    const data = docSnap.data();
    const lastActive = data.lastActive?.toDate()?.getTime();

    if (!lastActive || (now - lastActive > 30000)) {
      await deleteDoc(doc(db, "online_users", docSnap.id));
    }
  });
}

// Nettoyage toutes les 20 sec
setInterval(cleanInactiveUsers, 20000);

// 4ï¸âƒ£ Listener temps rÃ©el
onSnapshot(onlineCollection, (snapshot) => {
  const count = snapshot.size;

  document.getElementById("onlineCount").textContent = count;
  document.getElementById("onlineUsers").textContent = count;
});

/* ğŸ”„ Mise Ã  jour temps rÃ©el */
const realtimeDailyRef = doc(db, "stats_daily", todayKey());

onSnapshot(realtimeDailyRef, snap => {

  const value = snap.exists() ? snap.data().count || 0 : 0;

  document.getElementById("todayVisitsCard").textContent = value;
  document.getElementById("todayTable").textContent = value;

  const now = new Date().toLocaleTimeString();
  realtimeChart.data.labels.push(now);
  realtimeChart.data.datasets[0].data.push(value);

  if (realtimeChart.data.labels.length > 15) {
    realtimeChart.data.labels.shift();
    realtimeChart.data.datasets[0].data.shift();
  }

  realtimeChart.update();
});

/* AUTH STATE */
onAuthStateChanged(auth, async user => {

  if (!user) {
    authGuest.style.display = "flex";
    authUser.style.display = "none";
    adminPanel.style.display = "none";
    return;
  }

  authGuest.style.display = "none";
  authUser.style.display = "flex";
  welcomeText.textContent = "Bienvenue " + user.displayName;
  userPhoto.src = user.photoURL;

  const userRef = doc(db, "users", user.uid);
  let snap = await getDoc(userRef);

  /* CRÃ‰ATION UTILISATEUR */
  if (!snap.exists()) {
    await setDoc(userRef, {
      name: user.displayName,
      email: user.email,
      role: "user",
      blocked: false,
      createdAt: serverTimestamp()
    });
    snap = await getDoc(userRef);
  }

  const data = snap.data();

  /* BLOCAGE */
  if (data.blocked) {
    alert("â›” Compte bloquÃ©");
    await signOut(auth);
    return;
  }

  /* ADMIN */
 if (data.role === "admin") {
  isAdmin = true;
  adminPanel.style.display = "block";
  loadUsers();
  loadStats();
} else {
  isAdmin = false;
  adminPanel.style.display = "none";
}
});

/* ğŸ“Š STATS */
async function loadStats() {
  const ref = doc(db, "stats", "global");
  const snap = await getDoc(ref);
  adminVisits.textContent = snap.data()?.visits || 0;
}

/* ğŸ‘¥ UTILISATEURS */
async function loadUsers() {
  usersTable.innerHTML = "";
  const snap = await getDocs(collection(db, "users"));

  snap.forEach(d => {
    const u = d.data();
    usersTable.innerHTML += `
      <tr>
        <td>${u.email}</td>
        <td>${u.role}</td>
        <td>${u.blocked ? "â›”" : "âœ…"}</td>
        <td>
          <button onclick="toggleBlock('${d.id}', ${u.blocked})">
            ${u.blocked ? "DÃ©bloquer" : "Bloquer"}
          </button>
        </td>
      </tr>
    `;
  });
}

/* =========================
   ğŸ“Š COMPTEUR DE CLICS LIEN
========================= */

window.registerLinkClick = async function () {

  const today = todayKey();
  const clickKey = "clicked_" + today;

  if (localStorage.getItem(clickKey)) return;

  localStorage.setItem(clickKey, "true");

  const clickRef = doc(db, "link_clicks_daily", today);

  await setDoc(clickRef, {
    count: increment(1)
  }, { merge: true });

  loadTodayClicks();
};

/* ACTION ADMIN */
window.toggleBlock = async (uid, blocked) => {
  await setDoc(doc(db, "users", uid), { blocked: !blocked }, { merge: true });
  loadUsers();
};

/* â­ COMMENTAIRES & Ã‰TOILES */
const commentForm = document.getElementById("comment-form");
const commentsList = document.getElementById("comments-list");
const avgRating = document.getElementById("avg-rating");
const ratingCount = document.getElementById("rating-count");
const ratingInput = document.getElementById("rating");
const usernameInput = document.getElementById("username");
const commentInput = document.getElementById("comment");
const loadMoreBtn = document.getElementById("loadMoreComments");

let commentsLimit = 10;
let lastVisible = null;
let selectedRating = 0;

/* Gestion Ã©toiles */
document.querySelectorAll(".stars span").forEach(star => {
  star.onclick = () => {
    selectedRating = Number(star.dataset.value);
    ratingInput.value = selectedRating;
    document.querySelectorAll(".stars span").forEach(s =>
      s.classList.toggle("active", s.dataset.value <= selectedRating)
    );
  };
});

/* Envoi commentaire */
commentForm.addEventListener("submit", async e => {
  e.preventDefault();

  if (!selectedRating) {
    alert("Choisis une note â­");
    return;
  }

  await addDoc(collection(db, "comments"), {
    name: usernameInput.value,
    comment: commentInput.value,
    rating: selectedRating,
    createdAt: serverTimestamp()
  });

  commentForm.reset();
  selectedRating = 0;
  document.querySelectorAll(".stars span").forEach(s => s.classList.remove("active"));
});

/* Lecture commentaires en temps rÃ©el */
function loadComments() {
  const q = query(
    collection(db, "comments"),
    orderBy("createdAt", "desc"),
    limit(commentsLimit)
  );

  onSnapshot(q, snap => {
    commentsList.innerHTML = "";
    let total = 0;

    snap.forEach(d => {
      const c = d.data();
      total += c.rating;

      const date = c.createdAt?.toDate();
      const formattedDate = date
        ? date.toLocaleDateString("fr-FR") + " Ã  " +
          date.toLocaleTimeString("fr-FR", {
            hour: "2-digit",
            minute: "2-digit"
          })
        : "Date inconnue";

      commentsList.innerHTML += `
        <div class="comment-card">
          <h4>${c.name}</h4>
          <div class="stars-display">${"â­".repeat(c.rating)}</div>
          <p>${c.comment}</p>
          <small class="comment-date">ğŸ•’ ${formattedDate}</small>
          ${isAdmin ? `<button class="delete-comment" data-id="${d.id}">Supprimer</button>` : ""}
        </div>
      `;
    });

    ratingCount.textContent = snap.size;
    avgRating.textContent = snap.size
      ? (total / snap.size).toFixed(1)
      : "0.0";

    if (snap.size < commentsLimit) {
      loadMoreBtn.style.display = "none";
    } else {
      loadMoreBtn.style.display = "inline-block";
    }
  });
}

loadMoreBtn.addEventListener("click", () => {
  commentsLimit += 10;
  loadComments();
});

loadComments();

document.addEventListener("click", async e => {
  if (!e.target.classList.contains("delete-comment")) return;

  if (!confirm("Supprimer ce commentaire ?")) return;

  const id = e.target.dataset.id;
  await deleteDoc(doc(db, "comments", id));
});

const drawerLinks = document.querySelector(".drawer-links");

function updateDrawerShadow(){
  if(drawerLinks.scrollHeight > drawerLinks.clientHeight){
    drawerLinks.classList.add("can-scroll");
  } else {
    drawerLinks.classList.remove("can-scroll");
  }
}

drawerLinks.addEventListener("scroll", updateDrawerShadow);
window.addEventListener("resize", updateDrawerShadow);

updateDrawerShadow();

/* âœ¨ ANIMATION AU SCROLL */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add("show");
    }
  });
}, { threshold: 0.2 });

document.querySelectorAll(".service-card").forEach(card => {
  observer.observe(card);
});

window.openDrawer = function(){
  document.querySelector(".drawer").classList.add("open");
  document.querySelector(".drawer-overlay").classList.add("show")
  document.body.style.overflow = "hidden";
};

window.closeDrawer = function(){
  document.querySelector(".drawer").classList.remove("open");
  document.querySelector(".drawer-overlay").classList.remove("show");
  document.body.style.overflow = "";
};

document.querySelectorAll(".drawer-links a").forEach(link=>{
  link.addEventListener("click", ()=>{
    closeDrawer();
  });
});

const searchInput = document.getElementById("drawerSearch");
const drawerItems = document.querySelectorAll(".drawer-links a");

function highlight(text, query){
  if(!query) return text;
  const regex = new RegExp(`(${query})`, "gi");
  return text.replace(regex, "<mark>$1</mark>");
}

searchInput.addEventListener("input", ()=>{
  const value = searchInput.value.toLowerCase();

  drawerItems.forEach(item=>{
    if(!item.dataset.label){
      item.dataset.label = item.textContent.trim();
    }

    const label = item.dataset.label;
    const match = label.toLowerCase().includes(value);

    item.style.display = match ? "flex" : "none";
    item.innerHTML = highlight(label, value);
  });
});

/* =========================
   ğŸŸ¢ BADGE ULTRA DRAG PRO
========================= */

const badge = document.getElementById("draggableBadge");

let isDragging = false;
let offsetX = 0;
let offsetY = 0;

/* ğŸ”¹ RESTORE POSITION */
function restorePosition() {
  const saved = localStorage.getItem("badgePosition");
  if (!saved) return;

  const pos = JSON.parse(saved);
  badge.style.left = pos.x + "px";
  badge.style.top = pos.y + "px";
  badge.style.right = "auto";
  badge.style.bottom = "auto";
}

restorePosition();

/* ğŸ”¹ SAVE POSITION */
function savePosition(x, y) {
  localStorage.setItem("badgePosition", JSON.stringify({ x, y }));
}

/* ğŸ”¹ START DRAG (MOUSE + TOUCH) */
function startDrag(clientX, clientY) {
  isDragging = true;

  const rect = badge.getBoundingClientRect();
  offsetX = clientX - rect.left;
  offsetY = clientY - rect.top;

  badge.style.transition = "none";
  badge.style.cursor = "grabbing";
}

/* ğŸ”¹ MOVE */
function drag(clientX, clientY) {
  if (!isDragging) return;

  let x = clientX - offsetX;
  let y = clientY - offsetY;

  badge.style.left = x + "px";
  badge.style.top = y + "px";
  badge.style.right = "auto";
  badge.style.bottom = "auto";
}

/* ğŸ”¹ STOP DRAG + MAGNETIC SNAP */
function stopDrag() {
  if (!isDragging) return;
  isDragging = false;

  const rect = badge.getBoundingClientRect();
  const screenW = window.innerWidth;
  const screenH = window.innerHeight;
  const magnet = 80; // distance magnÃ©tique

  let x = rect.left;
  let y = rect.top;

  /* AIMANT GAUCHE / DROITE */
  if (x < magnet) x = 20;
  else if (x + rect.width > screenW - magnet)
    x = screenW - rect.width - 20;

  /* AIMANT HAUT / BAS */
  if (y < magnet) y = 20;
  else if (y + rect.height > screenH - magnet)
    y = screenH - rect.height - 20;

  badge.style.transition = "all .35s cubic-bezier(.34,1.56,.64,1)";
  badge.style.left = x + "px";
  badge.style.top = y + "px";

  savePosition(x, y);

  badge.style.cursor = "grab";
}

/* =========================
   â³ COMPTE Ã€ REBOURS FIN JOURNÃ‰E
========================= */

function startDayCountdown(){

  function updateCountdown(){

    const now = new Date();
    const tomorrow = new Date();
    tomorrow.setHours(24,0,0,0);

    const diff = tomorrow - now;

    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    document.getElementById("countHours").textContent =
      hours.toString().padStart(2,"0");

    document.getElementById("countMinutes").textContent =
      minutes.toString().padStart(2,"0");

    document.getElementById("countSeconds").textContent =
      seconds.toString().padStart(2,"0");
  }

  updateCountdown();
  setInterval(updateCountdown,1000);
}

startDayCountdown();

// ğŸ–±ï¸ MOUSE
badge.addEventListener("mousedown", e => {
  startDrag(e.clientX, e.clientY);
});

document.addEventListener("mousemove", e => {
  drag(e.clientX, e.clientY);
});

document.addEventListener("mouseup", stopDrag);

// ğŸ“± TOUCH
badge.addEventListener("touchstart", e => {
  const touch = e.touches[0];
  startDrag(touch.clientX, touch.clientY);
}, { passive: true });

document.addEventListener("touchmove", e => {
  if (!isDragging) return;
  const touch = e.touches[0];
  drag(touch.clientX, touch.clientY);
}, { passive: true });

document.addEventListener("touchend", stopDrag);

/* ğŸ”¹ PETITE ANIMATION AU CLIC */
badge.addEventListener("click", () => {
  badge.style.transform = "scale(1.1)";
  setTimeout(() => {
    badge.style.transform = "scale(1)";
  }, 150);
});
</script>

<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js" defer></script>
<script src="https://files.bpcontent.cloud/2025/12/10/23/20251210230142-FSLKPSBI.js" defer></script>

<section id="projet-transitaire" style="padding:60px 20px; text-align:center;">
  <h2>ğŸš¢ Projet : Jeune Transitaire</h2>
  <p>
    Plateforme spÃ©cialisÃ©e dans le transit, la logistique et le commerce international.
  </p>
 <a href="https://jeunetransitaire.vercel.app"
   target="_blank"
   onclick="registerLinkClick()"
   style="display:inline-block;padding:12px 25px;background:#2563eb;color:white;border-radius:8px;text-decoration:none;">
   Visiter mon site
 </a>
</section>

<script>
const canvas = document.getElementById("space-bg");
const ctx = canvas.getContext("2d");

let stars = [];
let shootingStars = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* â­ CrÃ©ation Ã©toiles */
for (let i = 0; i < 250; i++) {
  stars.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    size: Math.random() * 2,
    speed: Math.random() * 0.5
  });
}

/* ğŸŒ  Ã‰toiles filantes */
function createShootingStar() {
  shootingStars.push({
    x: Math.random() * canvas.width,
    y: 0,
    length: Math.random() * 80 + 50,
    speed: Math.random() * 8 + 6,
    opacity: 1
  });
}

setInterval(createShootingStar, 3000);

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  /* â­ Petites Ã©toiles */
  ctx.fillStyle = "white";
  stars.forEach(star => {
    star.y += star.speed;
    if (star.y > canvas.height) star.y = 0;

    ctx.beginPath();
    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
    ctx.fill();
  });

  /* ğŸŒ  Filantes */
  shootingStars.forEach((star, index) => {
    ctx.strokeStyle = "rgba(255,255,255," + star.opacity + ")";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(star.x, star.y);
    ctx.lineTo(star.x - star.length, star.y + star.length);
    ctx.stroke();

    star.x += star.speed;
    star.y += star.speed;
    star.opacity -= 0.02;

    if (star.opacity <= 0) {
      shootingStars.splice(index, 1);
    }
  });

  requestAnimationFrame(animate);
}

animate();
</script>

<script>
const cards = document.querySelectorAll(".service-card");

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add("show");
    }
  });
},{ threshold: 0.3 });

cards.forEach(card => observer.observe(card));
</script>

<footer style="text-align:center;padding:40px;color:#6b7280">
Â© 2026 â€” Amateur De Fantaisie
</footer>

</body>
</html>
