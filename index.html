<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚õ©Ô∏è Amateur De Fantaisie ‚õ©Ô∏è - Solutions Tech</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ‚Ä¶ ton CSS ‚Äî inchang√© ‚Ä¶ */
</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
    <div class="nav-container">
        <div class="logo">
            <a href="/">‚õ©Ô∏è Amateur De Fantaisie ‚õ©Ô∏è</a>
        </div>

        <ul class="nav-menu">
            <li><a href="/">Accueil</a></li>
            <li><a href="/services.html">Services</a></li>
            <li><a href="/chatbot.html">Chatbots</a></li>
            <li><a href="/about.html">√Ä Propos</a></li>
            <li><a href="/contact.html">Contact</a></li>
        </ul>

        <!-- üîê AUTH BUTTONS -->
        <div id="auth-buttons">
            <button id="login" class="btn btn-secondary">Connexion</button>
            <button id="logout" class="btn btn-primary" style="display:none;">D√©connexion</button>
        </div>
    </div>
</nav>

<!-- üîΩ le reste est IDENTIQUE -->
<section class="hero"> ‚Ä¶ </section>
<section class="section"> ‚Ä¶ </section>
<section class="cta-section"> ‚Ä¶ </section>
<footer> ‚Ä¶ </footer>


<!-- üîê AUTH0 SPA -->
<script src="https://cdn.auth0.com/js/auth0-spa-js/2.5/auth0-spa-js.production.js"></script>

<script>
/**
 * CONFIG ‚Äî REMPLACE ICI
 */
const auth0Config = {
    domain: "dev-ujab2ssb7yhm138u.eu.auth0.com",
    clientId: "yCSeyeHUlh2mEGaJNgP7LhnzB5VuSKMI",
    authorizationParams: {
        redirect_uri: window.location.origin
    }
};

let auth0Client = null;

/**
 * INITIALISATION
 */
async function initAuth() {
    auth0Client = await auth0.createAuth0Client(auth0Config);

    // si retour de connexion
    if (window.location.search.includes("code=") &&
        window.location.search.includes("state=")) {
        await auth0Client.handleRedirectCallback();
        window.history.replaceState({}, document.title, "/");
    }

    updateUI();
}

/**
 * UI LOGIN / LOGOUT
 */
async function updateUI() {
    const isAuthenticated = await auth0Client.isAuthenticated();

    const loginBtn = document.getElementById("login");
    const logoutBtn = document.getElementById("logout");

    if (isAuthenticated) {
        loginBtn.style.display = "none";
        logoutBtn.style.display = "inline-flex";

        const user = await auth0Client.getUser();
        console.log("Connect√© :", user);
    } else {
        loginBtn.style.display = "inline-flex";
        logoutBtn.style.display = "none";
    }
}

/**
 * BOUTONS
 */
document.getElementById("login").addEventListener("click", () => {
    auth0Client.loginWithRedirect();
});

document.getElementById("logout").addEventListener("click", () => {
    auth0Client.logout({
        logoutParams: { returnTo: window.location.origin }
    });
});

// LANCER
initAuth();
</script>

</body>
</html>
