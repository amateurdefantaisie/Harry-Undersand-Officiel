<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Alice ‚Äî Assistant IA</title>

  <link rel="stylesheet" href="cookies.css">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N696WFVZ8G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N696WFVZ8G');
</script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚õ©Ô∏è</text></svg>">

  <!-- SEO -->
  <meta name="description" content="Discutez avec Alice, l‚Äôassistante IA intelligente." />
  <meta name="theme-color" content="#ffffff" />

  <!-- Manifest PWA inline -->
  <link
    rel="manifest"
    href='data:application/json,{
      "name":"Alice ‚Äî Assistant IA",
      "short_name":"Alice",
      "start_url":"/alice.html",
      "display":"standalone",
      "background_color":"#ffffff",
      "theme_color":"#ffffff",
      "icons":[
        {
          "src":"https://files.bpcontent.cloud/2025/12/11/13/20251211133410-XE4M25HS.jpeg",
          "sizes":"192x192",
          "type":"image/png"
        },
        {
          "src":"https://files.bpcontent.cloud/2025/12/11/13/20251211133410-XE4M25HS.jpeg",
          "sizes":"512x512",
          "type":"image/png"
        }
      ]
    }'
  />

  <style>
    /* RESET */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #ffffff;
    }

    /* PAGE LAYOUT */
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* HEADER */
    header {
      height: 52px;
      display: flex;
      align-items: center;
      padding: 0 14px;
      background: #ffffff;
      border-bottom: 1px solid #e6e6e6;
      flex-shrink: 0;
    }

    .back-btn {
      text-decoration: none;
      color: #3276ea;
      font-weight: 500;
      font-size: 15px;
    }

    /* CHAT ZONE */
    main {
      flex: 1;
      background: #ffffff;
      animation: fadeIn 0.35s ease-out;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }

    /* FOOTER */
    footer {
      padding: 12px 16px;
      font-size: 13px;
      text-align: center;
      color: #666;
      border-top: 1px solid #e6e6e6;
      background: #ffffff;
      flex-shrink: 0;
    }

    /* Animation */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(6px) scale(0.985);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Mobile safe */
    @media (max-width: 768px) {
      header {
        height: 48px;
      }
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <a href="/" class="back-btn">‚Üê Retour au site</a>
  </header>

  <!-- CHATBOT -->
  <main>
    <iframe
      src="https://cdn.botpress.cloud/webchat/v3.5/shareable.html?configUrl=https://files.bpcontent.cloud/2025/12/10/23/20251210230142-Z03GGRUZ.json"
      allow="microphone; clipboard-write"
      loading="eager"
      referrerpolicy="no-referrer"
      title="Alice ‚Äî Chatbot"
    ></iframe>
  </main>

  <!-- FOOTER -->
  <footer>
    ¬© 2026 Amateur De Fantaisie ‚Äî Chatbots by Harry Undersand
  </footer>

  <!-- Service Worker inline -->
  <script>
    if ("serviceWorker" in navigator) {
      const swCode = `
        self.addEventListener("install", e => self.skipWaiting());
        self.addEventListener("activate", e => self.clients.claim());
        self.addEventListener("fetch", e => {});
      `;
      const blob = new Blob([swCode], { type: "text/javascript" });
      const swUrl = URL.createObjectURL(blob);
      navigator.serviceWorker.register(swUrl);
    }
  </script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBdo7NO1PnAa90PhEhuzpllkB1ESGZu3J8",
  authDomain: "harry-undersand.firebaseapp.com",
  projectId: "harry-undersand"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

onAuthStateChanged(auth, user => {

  if (!user) {

    // On m√©morise la page actuelle
    sessionStorage.setItem(
      "redirectAfterLogin",
      window.location.pathname
    );

    // Redirection vers accueil
    window.location.href = "/?loginRequired=true";
  }

});
</script>

<!-- üç™ Bandeau Cookies -->
<div id="cookie-banner" class="cookie-banner">
  <div class="cookie-content">
    <p>
      üç™ Ce site utilise des cookies pour am√©liorer votre exp√©rience.
      En continuant, vous acceptez notre utilisation des cookies.
    </p>
    <div class="cookie-buttons">
      <button id="accept-cookies">Accepter</button>
      <button id="reject-cookies">Refuser</button>
    </div>
  </div>
</div>

<script src="cookies.js"></script>

</body>
</html>
