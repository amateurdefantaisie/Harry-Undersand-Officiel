<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harry Undersand ‚Äî D√©veloppeur & Architecte IA</title>

<link rel="icon" type="image/svg+xml"
href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚õ©Ô∏è</text></svg>">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0b141a;
--card:#111b21;
--border:rgba(139,92,246,.35);
--violet:#8b5cf6;
--violet-dark:#7c3aed;
--text:#e9edef;
--muted:#8696a0;
}
body{
font-family:Inter,Arial,sans-serif;
background:var(--bg);
color:var(--text);
}
header{
position:fixed;
top:0;width:100%;
z-index:1000;
background:rgba(11,20,26,.9);
backdrop-filter:blur(16px);
border-bottom:1px solid var(--border);
}
.navbar{
max-width:1200px;
margin:auto;
padding:16px 24px;
display:flex;
justify-content:space-between;
align-items:center;
}
.logo{color:var(--violet);font-weight:800;text-decoration:none}
.nav-links{display:flex;gap:18px}
.nav-links a{color:var(--muted);text-decoration:none}
.nav-links a:hover{color:var(--violet)}
.burger{display:none;font-size:22px;cursor:pointer}

.container{max-width:1200px;margin:auto;padding:20px}
.hero{padding-top:160px;text-align:center}
.hero h1{font-size:3rem}
.hero span{color:var(--violet)}
.hero p{margin:20px auto;max-width:780px;color:var(--muted)}
.btn{padding:12px 22px;border-radius:30px;border:none;cursor:pointer;font-weight:600}
.btn-primary{background:linear-gradient(135deg,var(--violet),var(--violet-dark));color:#fff}
.btn-outline{background:none;border:1px solid var(--border);color:#fff}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:28px;margin-top:40px}
.card{
background:var(--card);
border:1px solid var(--border);
border-radius:20px;
padding:26px;
transition:.3s;
}
.card:hover{transform:translateY(-6px);box-shadow:0 0 30px rgba(139,92,246,.35)}

.auth-actions{display:flex;gap:10px;align-items:center}
.auth-actions img{width:32px;height:32px;border-radius:50%}

.modal-bg{
position:fixed;inset:0;
background:rgba(0,0,0,.65);
display:none;
align-items:center;
justify-content:center;
z-index:2000
}
.modal{
background:var(--card);
border:1px solid var(--border);
padding:30px;
border-radius:20px;
max-width:420px;width:100%
}
.auth-btn{
width:100%;
padding:14px;
margin-top:12px;
border-radius:12px;
border:none;
cursor:pointer;
font-weight:600;
display:flex;
align-items:center;
justify-content:center;
gap:10px
}
.auth-btn.google{background:#fff;color:#000}
.auth-btn.facebook{background:#1877f2;color:#fff}
.auth-btn.github{background:#0f172a;color:#fff}
.close-btn{margin-top:16px;background:none;border:none;color:#94a3b8;cursor:pointer}

@media(max-width:900px){
.nav-links{display:none;flex-direction:column;background:#0b141a;position:absolute;top:70px;left:0;width:100%;padding:20px}
.nav-links.show{display:flex}
.burger{display:block}
}
</style>
</head>

<body>

<header>
<section class="container" id="adminPanel" style="display:none">
  <div class="card">
    <h2>üëë Administration</h2>

    <p>üìä Visites : <b><span id="adminVisits">0</span></b></p>

    <h3>üë• Utilisateurs</h3>
    <table class="users-table">
      <thead>
        <tr>
          <th>Email</th>
          <th>R√¥le</th>
          <th>Statut</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="usersTable"></tbody>
    </table>
  </div>
</section>

<div class="navbar">
<a class="logo" href="/">ÂΩ° ‚õ©Ô∏è ÂΩ°</a>
<div class="burger" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
<nav class="nav-links" id="menu">
<a href="services.html">Services</a>
<a href="chatbot.html">Chatbots</a>
<a href="streaming.html">Streaming</a>
<a href="hosting.html">H√©bergement</a>
<a href="premium.html">Premium</a>
<a href="commande.html">Commande</a>
<a href="contact.html">Contact</a>
</nav>
<div class="auth-actions" id="authGuest">
<button class="btn btn-outline" id="loginBtn">Connexion</button>
<button class="btn btn-primary" id="registerBtn">Inscription</button>
</div>
<div class="auth-actions" id="authUser" style="display:none">
<span id="welcomeText"></span>
<img id="userPhoto">
<button class="btn btn-outline" id="logoutBtn">D√©connexion</button>
</div>
</div>
</header>

<section class="hero">
<h1>Harry Undersand<br><span>D√©veloppeur & Architecte IA</span></h1>
<p>Chatbots IA, Streaming Premium, H√©bergement Cloud et automatisation digitale.</p>
</section>

<!-- MODALE AUTH -->
<div class="modal-bg" id="authModal">
<div class="modal">
<h2>Connexion</h2>
<p>Choisis un moyen pour continuer</p>
<button class="auth-btn google" id="googleLogin"><i class="fab fa-google"></i> Google</button>
<button class="auth-btn facebook" id="facebookLogin"><i class="fab fa-facebook"></i> Facebook</button>
<button class="auth-btn github" id="githubLogin"><i class="fab fa-github"></i> GitHub</button>
<button class="close-btn" id="closeModal">Fermer</button>
</div>
</div>

<p>üìÖ Aujourd‚Äôhui : <b><span id="todayVisits">0</span></b></p>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  FacebookAuthProvider,
  GithubAuthProvider,
  signInWithPopup,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

import {
  getFirestore,
  doc,
  setDoc,
  getDoc,
  getDocs,
  collection,
  serverTimestamp,
  increment
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* ‚≠ê COMMENTAIRES & √âTOILES */
import {
  addDoc,
  query,
  orderBy,
  onSnapshot
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const commentForm = document.getElementById("comment-form");
const commentsList = document.getElementById("comments-list");
const avgRating = document.getElementById("avg-rating");
const ratingCount = document.getElementById("rating-count");
const ratingInput = document.getElementById("rating");

let selectedRating = 0;

/* Gestion √©toiles */
document.querySelectorAll(".stars span").forEach(star => {
  star.onclick = () => {
    selectedRating = Number(star.dataset.value);
    ratingInput.value = selectedRating;
    document.querySelectorAll(".stars span").forEach(s =>
      s.classList.toggle("active", s.dataset.value <= selectedRating)
    );
  };
});

/* Envoi commentaire */
commentForm.addEventListener("submit", async e => {
  e.preventDefault();

  if (!selectedRating) {
    alert("Choisis une note ‚≠ê");
    return;
  }

  await addDoc(collection(db, "comments"), {
    name: username.value,
    comment: comment.value,
    rating: selectedRating,
    createdAt: serverTimestamp()
  });

  commentForm.reset();
  selectedRating = 0;
  document.querySelectorAll(".stars span").forEach(s => s.classList.remove("active"));
});

/* Lecture commentaires en temps r√©el */
const q = query(collection(db, "comments"), orderBy("createdAt", "desc"));

onSnapshot(q, snap => {
  commentsList.innerHTML = "";
  let total = 0;

  snap.forEach(d => {
    const c = d.data();
    total += c.rating;

    commentsList.innerHTML += `
      <div class="comment-card">
        <h4>${c.name}</h4>
        <p>${"‚≠ê".repeat(c.rating)}</p>
        <p>${c.comment}</p>
      </div>
    `;
  });

  ratingCount.textContent = snap.size;
  avgRating.textContent = snap.size ? (total / snap.size).toFixed(1) : "0.0";
});

/* üîë FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyBdo7NO1PnAa90PhEhuzpllkB1ESGZu3J8",
  authDomain: "harry-undersand.firebaseapp.com",
  projectId: "harry-undersand"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* PROVIDERS */
const googleProvider = new GoogleAuthProvider();
const facebookProvider = new FacebookAuthProvider();
const githubProvider = new GithubAuthProvider();

/* ELEMENTS */
const authGuest = document.getElementById("authGuest");
const authUser = document.getElementById("authUser");
const adminPanel = document.getElementById("adminPanel");
const usersTable = document.getElementById("usersTable");
const adminVisits = document.getElementById("adminVisits");

const authModal = document.getElementById("authModal");

/* BOUTONS */
loginBtn.onclick = () => authModal.style.display = "flex";
registerBtn.onclick = () => authModal.style.display = "flex";
closeModal.onclick = () => authModal.style.display = "none";

googleLogin.onclick = () => signInWithPopup(auth, googleProvider);
facebookLogin.onclick = () => signInWithPopup(auth, facebookProvider);
githubLogin.onclick = () => signInWithPopup(auth, githubProvider);
logoutBtn.onclick = () => signOut(auth);

/* AUTH STATE */
onAuthStateChanged(auth, async user => {

  if (!user) {
    authGuest.style.display = "flex";
    authUser.style.display = "none";
    adminPanel.style.display = "none";
    return;
  }

  authGuest.style.display = "none";
  authUser.style.display = "flex";
  welcomeText.textContent = "Bienvenue " + user.displayName;
  userPhoto.src = user.photoURL;

  const userRef = doc(db, "users", user.uid);
  let snap = await getDoc(userRef);

  /* CR√âATION UTILISATEUR */
  if (!snap.exists()) {
    await setDoc(userRef, {
      name: user.displayName,
      email: user.email,
      role: "user",
      blocked: false,
      createdAt: serverTimestamp()
    });
    snap = await getDoc(userRef);
  }

  const data = snap.data();

  /* BLOCAGE */
  if (data.blocked) {
    alert("‚õî Compte bloqu√©");
    await signOut(auth);
    return;
  }

  /* ADMIN */
  if (data.role === "admin") {
    adminPanel.style.display = "block";
    loadUsers();
    loadStats();
  } else {
    adminPanel.style.display = "none";
  }
});

const loginList = document.getElementById("loginList");

async function loadLogins() {
  const q = query(
    collection(db, "logins"),
    orderBy("createdAt", "desc")
  );

  onSnapshot(q, snap => {
    loginList.innerHTML = "";
    snap.forEach(d => {
      const l = d.data();
      loginList.innerHTML += `
        <li>${l.email} ‚Äî ${l.provider}</li>
      `;
    });
  });
}

/* üìä STATS */
async function loadStats() {
  const ref = doc(db, "stats", "global");
  await setDoc(ref, { visits: increment(1) }, { merge: true });
  const snap = await getDoc(ref);
  adminVisits.textContent = snap.data()?.visits || 0;
}

/* üë• UTILISATEURS */
async function loadUsers() {
  usersTable.innerHTML = "";
  const snap = await getDocs(collection(db, "users"));

  snap.forEach(d => {
    const u = d.data();
    usersTable.innerHTML += `
      <tr>
        <td>${u.email}</td>
        <td>${u.role}</td>
        <td>${u.blocked ? "‚õî" : "‚úÖ"}</td>
        <td>
          <button onclick="toggleBlock('${d.id}', ${u.blocked})">
            ${u.blocked ? "D√©bloquer" : "Bloquer"}
          </button>
        </td>
      </tr>
    `;
  });
}

/* üìä VISITES */
function todayKey() {
  return new Date().toISOString().split("T")[0];
}

async function registerVisit() {
  const globalRef = doc(db, "stats", "global");
  const dailyRef = doc(db, "stats_daily", todayKey());

  await setDoc(globalRef, { total: increment(1) }, { merge: true });
  await setDoc(dailyRef, { count: increment(1) }, { merge: true });
}

registerVisit();

/* ACTION ADMIN */
window.toggleBlock = async (uid, blocked) => {
  await setDoc(doc(db, "users", uid), { blocked: !blocked }, { merge: true });
  loadUsers();
};
</script>

<footer style="text-align:center;padding:40px;color:#6b7280">
¬© 2026 ‚Äî Amateur De Fantaisie
</footer>

</body>
</html>
